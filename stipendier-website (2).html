<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>hittastipendier.se - Aktiva stipendier för utlandsstudier</title>
    <style>
        body {
            font-family: Georgia, 'Times New Roman', serif;
            background-color: #f5f5f5;
            color: #333;
            margin: 0;
            padding: 20px;
            line-height: 1.8;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            background-color: white;
            padding: 40px;
            border: 1px solid #ccc;
        }
        
        h1 {
            font-family: 'Times New Roman', Times, serif;
            font-size: 36px;
            text-align: center;
            margin-bottom: 0px;
            color: #000080;
            font-weight: normal;
        }
        
        .subtitle {
            font-style: italic;
            text-align: center;
            margin-top: 0px;
            margin-bottom: 5px;
            font-size: 16px;
            color: #555;
        }
        
        .top-info {
            text-align: center;
            font-size: 12px;
            color: #666;
            margin-bottom: 30px;
        }
        
        h2 {
            font-family: 'Arial', sans-serif;
            font-size: 18px;
            font-weight: bold;
            margin: 40px 0 20px 0;
            padding-bottom: 10px;
            border-bottom: 2px solid #333;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .intro {
            margin-bottom: 40px;
            padding: 30px;
            background-color: #f8f8f8;
            border-left: 4px solid #333;
        }
        
        .intro p {
            margin: 10px 0;
        }
        
        .intro em {
            font-style: italic;
            color: #555;
        }
        
        .authors {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-top: 20px;
        }
        
        .author-image {
            width: 120px;
            height: 120px;
            object-fit: cover;
            border-radius: 4px;
        }
        
        .author-text {
            flex: 1;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        
        th, td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }
        
        th {
            background-color: #f5f5f5;
            font-weight: bold;
            font-family: Arial, sans-serif;
            font-size: 14px;
        }
        
        tr:hover {
            background-color: #fafafa;
        }
        
        a {
            color: #0000EE;
            text-decoration: underline;
        }
        
        a:visited {
            color: #551A8B;
        }
        
        a:hover {
            text-decoration: underline;
        }
        
        .scholarship-item {
            margin-bottom: 15px;
            padding: 15px;
            background-color: #fafafa;
            border-left: 3px solid #333;
        }
        
        .scholarship-item strong {
            display: block;
            margin-bottom: 5px;
        }
        
        .amount {
            color: #2a7f3e;
            font-weight: bold;
        }
        
        .details {
            font-size: 14px;
            color: #666;
            margin-top: 5px;
        }
        
        .highlight {
            background-color: #ffff00;
            padding: 2px 4px;
            font-weight: bold;
        }
        
        .footer {
            margin-top: 60px;
            padding-top: 30px;
            border-top: 1px solid #ddd;
            text-align: center;
            font-size: 14px;
            color: #666;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>hittastipendier.se</h1>
        <p class="subtitle">stipendierna som faktiskt är aktiva</p>
        
        <div class="top-info">
            Besökare: <span id="visitor-count">...</span> | Senast uppdaterad: <span id="update-date">juli 2025</span>
        </div>
        
        <div class="intro">
            <p><em>Vi har lagt ner hundratals timmar vardera i utdaterade databaser för att hitta aktiva stipendier för utlandsstudier – ofta är det svårt att hitta stiftelsens webbplats, och lika ofta är stiftelserna inte ens aktiva längre.</em></p>
            
            <p><em>För att andra utlandsstudenter ska få det betydligt enklare har vi därför kastat ihop <span class="highlight">denna lista som innehåller länkar och ansökningsdatum till de stiftelser som vi själva fått stipendier från / som är aktiva.</span></em></p>
            
            <p><strong>Mejla om ni har några frågor: <a href="mailto:karlcal@berkeley.edu">karlcal@berkeley.edu</a> eller <a href="mailto:aheiman@stanford.edu">aheiman@stanford.edu</a>. Och glöm inte att återkoppla till stiftelserna – de flesta har det som krav för att få stipendier flera gånger. <em>Vi hoppas att detta gör sökandet betydligt snabbare!</em></strong></p>
            
            <div class="authors">
                <img src="karl-alice.jpg" alt="Karl och Alice" class="author-image" style="display:none;" id="author-photo">
                <div class="author-text">
                    <strong>Karl och Alice</strong><br>
                    <span id="author-details">Karl (fysikstudent vid Berkeley) & Alice (datavetenskapsstudent vid Stanford)</span>
                </div>
            </div>
        </div>

        <div id="content">
            <!-- Content loads here from Airtable -->
            
            <h2>De stipendier Karl har fått</h2>
            <div class="scholarship-item">
                <strong>Erik och Göran Ennerfelts stiftelse</strong>
                <span class="amount">2 x 250 000 kr</span>
            </div>
            <div class="scholarship-item">
                <strong>Gustaf Söderbergs stiftelse</strong>
                <span class="amount">6000 kr + 6500 kr + 3500 kr</span>
            </div>
            <div class="scholarship-item">
                <strong>Carl Erik Levins stiftelse</strong>
                <span class="amount">30 000 kr + 20 000 kr</span>
            </div>
            <div class="scholarship-item">
                <strong>Anna whitlocks stiftelse</strong>
                <span class="amount">10 000 kr</span>
            </div>
            <div class="scholarship-item">
                <strong>Lindhés Advokatbyrå (Sigurd och Elsa Golges stiftelse)</strong>
                <span class="amount">20 000 kr</span>
            </div>
            <div class="scholarship-item">
                <strong>Stiftelsen AAA</strong>
                <span class="amount">20 000 kr</span>
            </div>

            <h2>Karls ansökningsschema</h2>
            <table>
                <tr><th>Månad</th><th>Stiftelse</th><th>Detaljer</th></tr>
                <tr><td>Januari</td><td>Anna Whitlock</td><td>Stiftelsen mottar ansökan flera gånger om året.</td></tr>
                <tr><td>Januari</td><td>Lindhés Advokatbyrå AB</td><td>Måste posta fysiskt.</td></tr>
                <tr><td>Februari</td><td>Gustaf Söderbergs Stiftelse</td><td>Jag känner en kompis som också fick detta stipendium.</td></tr>
                <tr><td>Mars</td><td>Carl Erik Levins Stiftelse</td><td>Sök på "Carl Erik Levin" på stiftelseansokan.se</td></tr>
                <tr><td>November</td><td>Erik och Göran Ennerfelts Stiftelse</td><td>Detta stipendium är väldigt stort!</td></tr>
            </table>

            <h2>Användbara länkar</h2>
            <ul>
                <li><a href="https://stiftelser.lansstyrelsen.se/Sök">Länsstiftelserna sök</a></li>
                <li><a href="https://stipendieguiden.com/">Stipendieguiden</a></li>
                <li><a href="https://www.stiftelseansokan.se/">Stiftelseansökan</a></li>
            </ul>
        </div>
        
        <div class="footer">
            <p>Denna sida är skapad av Karl Vilhelmsson Emneby och Alice Heiman i syfte att hjälpa svenska utlandsstudenter att lättare söka stipendier</p>
        </div>
    </div>

    <script>
        // AIRTABLE CONFIGURATION
        const AIRTABLE_API_KEY = 'YOUR_API_KEY_HERE';
        const AIRTABLE_BASE_ID = 'YOUR_BASE_ID_HERE';
        
        // Visitor counter
        async function updateVisitorCount() {
            try {
                // Try the hit endpoint first (creates if doesn't exist)
                let response = await fetch(`https://api.countapi.xyz/hit/hittastipendier-se/visits`);
                if (!response.ok) {
                    // If that fails, try creating it
                    response = await fetch(`https://api.countapi.xyz/create?namespace=hittastipendier-se&key=visits&value=0`);
                }
                const data = await response.json();
                document.getElementById('visitor-count').textContent = data.value ? data.value.toLocaleString('sv-SE') : '1';
            } catch (error) {
                console.error('Counter error:', error);
                // If CountAPI is completely down, show a fallback
                document.getElementById('visitor-count').textContent = '---';
            }
        }

        // Fetch from Airtable
        async function fetchAirtableData(tableName) {
            const url = `https://api.airtable.com/v0/${AIRTABLE_BASE_ID}/${tableName}`;
            try {
                const response = await fetch(url, {
                    headers: {
                        'Authorization': `Bearer ${AIRTABLE_API_KEY}`
                    }
                });
                const data = await response.json();
                return data.records;
            } catch (error) {
                console.error('Error:', error);
                return [];
            }
        }

        // Load content from Airtable
        async function loadContent() {
            // Only load if Airtable is configured
            if (AIRTABLE_API_KEY === 'YOUR_API_KEY_HERE') {
                return; // Use the default content that's already in HTML
            }

            try {
                // Load sections
                const sections = await fetchAirtableData('Sections');
                let contentHTML = '';

                for (const section of sections) {
                    const sectionData = section.fields;
                    if (!sectionData.Active) continue;

                    contentHTML += `<h2>${sectionData.Title}</h2>`;

                    if (sectionData.Type === 'scholarships') {
                        const scholarships = await fetchAirtableData(sectionData.DataTable);
                        scholarships.forEach(record => {
                            const s = record.fields;
                            contentHTML += `<div class="scholarship-item">
                                <strong>${s.Name}</strong>
                                <span class="amount">${s.Amount}</span>
                                ${s.Details ? `<div class="details">${s.Details}</div>` : ''}
                            </div>`;
                        });
                    } else if (sectionData.Type === 'schedule') {
                        const scheduleData = await fetchAirtableData(sectionData.DataTable);
                        contentHTML += '<table><tr><th>Månad</th><th>Stiftelse</th><th>Detaljer</th></tr>';
                        scheduleData.forEach(record => {
                            const s = record.fields;
                            contentHTML += `<tr>
                                <td>${s.Month || ''}</td>
                                <td>${s.Foundation || ''}</td>
                                <td>${s.Details || ''}</td>
                            </tr>`;
                        });
                        contentHTML += '</table>';
                    } else if (sectionData.Type === 'links') {
                        const links = await fetchAirtableData(sectionData.DataTable);
                        contentHTML += '<ul>';
                        links.forEach(record => {
                            const l = record.fields;
                            contentHTML += `<li><a href="${l.URL}">${l.Name}</a></li>`;
                        });
                        contentHTML += '</ul>';
                    }
                }

                if (contentHTML) {
                    document.getElementById('content').innerHTML = contentHTML;
                }

                // Check for author photo and update date
                const pageInfo = await fetchAirtableData('PageInfo');
                if (pageInfo.length > 0) {
                    const info = pageInfo[0].fields;
                    
                    // Author photo
                    if (info.AuthorPhoto) {
                        const photoUrl = info.AuthorPhoto[0].url;
                        const photo = document.getElementById('author-photo');
                        photo.src = photoUrl;
                        photo.style.display = 'block';
                    }
                    
                    // Update date
                    if (info.UpdateDate) {
                        document.getElementById('update-date').textContent = info.UpdateDate;
                    }
                }
            } catch (error) {
                console.error('Error loading content:', error);
            }
        }

        // Initialize
        window.onload = function() {
            updateVisitorCount();
            loadContent();
        };
    </script>
</body>
</html>